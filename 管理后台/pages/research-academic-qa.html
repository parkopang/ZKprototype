<!-- ç§‘ç ”è¶…çº§æ™ºèƒ½ä½“ï¼šå­¦æœ¯é—®ç­”é¡µé¢ -->
<div class="academic-qa-page">
    <div class="academic-qa-header">
        <div class="academic-qa-title-section">
            <div class="academic-qa-icon">ğŸ“</div>
            <h1 class="academic-qa-title">å­¦æœ¯é—®ç­”</h1>
        </div>
        <p class="academic-qa-subtitle">å­¦æœ¯é—®ç­”ï¼Œä¸¥è°¨ä½œç­”</p>
    </div>
    
    <!-- é—®ç­”æ¨¡å¼é€‰æ‹©å™¨ -->
    <div class="qa-mode-selector">
        <button class="mode-btn" id="modeFullWeb" onclick="switchQAMode('fullweb')">å…¨ç½‘</button>
        <button class="mode-btn active" id="modeAcademic" onclick="switchQAMode('academic')">å­¦æœ¯</button>
    </div>
    
    <!-- é—®é¢˜è¾“å…¥åŒºåŸŸ -->
    <div class="qa-input-section">
        <div class="qa-input-container">
            <textarea 
                class="qa-input" 
                id="qaQuestionInput"
                placeholder="è¯¢é—®ä»»ä½•é—®é¢˜ï¼Œæå‡ºä»»ä½•éœ€æ±‚"
                rows="4"
            ></textarea>
            <div class="qa-input-actions">
                <button class="qa-action-btn" id="qaVoiceBtn" onclick="startVoiceInput()" title="è¯­éŸ³è¾“å…¥">
                    <span>ğŸ¤</span>
                </button>
                <button class="qa-action-btn qa-submit-btn" id="qaSubmitBtn" onclick="submitQuestion()" title="æäº¤">
                    <span>â†’</span>
                </button>
            </div>
        </div>
        
        <!-- ç ”ç©¶æ¨¡å¼å’Œæ¨¡å‹é€‰æ‹© -->
        <div class="qa-options-bar">
            <button class="qa-option-btn" id="deepResearchBtn" onclick="toggleDeepResearch()">
                <span>æ·±åº¦ç ”ç©¶</span>
            </button>
            <div class="qa-model-selector">
                <button class="qa-option-btn" id="modelSelectBtn" onclick="toggleModelDropdown()">
                    <span>æ ‡å‡†æ¨¡å‹</span>
                    <span class="dropdown-arrow">â–¼</span>
                </button>
                <div class="model-dropdown" id="modelDropdown" style="display: none;">
                    <div class="model-option" onclick="selectModel('standard')">æ ‡å‡†æ¨¡å‹</div>
                    <div class="model-option" onclick="selectModel('advanced')">é«˜çº§æ¨¡å‹</div>
                    <div class="model-option" onclick="selectModel('expert')">ä¸“å®¶æ¨¡å‹</div>
                </div>
            </div>
        </div>
        
        <!-- å­¦æœ¯èµ„æºLogo -->
        <div class="academic-resources">
            <div class="resources-label">æ”¯æŒçš„å­¦æœ¯èµ„æºï¼š</div>
            <div class="resources-logos">
                <div class="resource-logo" title="PubMed - ç”Ÿç‰©åŒ»å­¦æ–‡çŒ®æ•°æ®åº“">
                    <div class="logo-text">PubMed</div>
                    <div class="logo-url">pubmed.ncbi.nlm.nih.gov</div>
                </div>
                <div class="resource-logo" title="IEEE Xplore - ç”µå­ç”µæ°”å·¥ç¨‹æ•°æ®åº“">
                    <div class="logo-text">IEEE</div>
                    <div class="logo-url">ieeexplore.ieee.org</div>
                </div>
                <div class="resource-logo" title="ACM Digital Library - è®¡ç®—æœºç§‘å­¦æ•°æ®åº“">
                    <div class="logo-text">ACM</div>
                    <div class="logo-url">dl.acm.org</div>
                </div>
                <div class="resource-logo" title="Science - ç§‘å­¦æœŸåˆŠ">
                    <div class="logo-text">Science</div>
                    <div class="logo-url">science.org</div>
                </div>
                <div class="resource-logo" title="Wiley Online Library - å¤šå­¦ç§‘æœŸåˆŠæ•°æ®åº“">
                    <div class="logo-text">WILEY</div>
                    <div class="logo-url">onlinelibrary.wiley.com</div>
                </div>
                <div class="resource-logo" title="Springer Nature - ç§‘å­¦å‡ºç‰ˆå•†">
                    <div class="logo-text">SPRINGER NATURE</div>
                    <div class="logo-url">springernature.com</div>
                </div>
                <div class="resource-logo" title="arXiv - é¢„å°æœ¬æœåŠ¡å™¨">
                    <div class="logo-text">arXiv</div>
                    <div class="logo-url">arxiv.org</div>
                </div>
            </div>
            <!-- ç ”å‘è¯´æ˜åŒºåŸŸ -->
            <div class="dev-notes">
                <div class="dev-notes-title">ğŸ“Œ ç ”å‘è¯´æ˜ï¼šæ•°æ®æ¥æºç½‘ç«™</div>
                <div class="dev-notes-content">
                    <div class="dev-note-item">
                        <strong>PubMed</strong>ï¼šhttps://pubmed.ncbi.nlm.nih.gov/ - ç¾å›½å›½ç«‹åŒ»å­¦å›¾ä¹¦é¦†ï¼ˆNLMï¼‰ç”Ÿç‰©åŒ»å­¦æ–‡çŒ®æ•°æ®åº“
                    </div>
                    <div class="dev-note-item">
                        <strong>IEEE Xplore</strong>ï¼šhttps://ieeexplore.ieee.org/ - ç”µæ°”å’Œç”µå­å·¥ç¨‹å¸ˆåä¼šå…¨æ–‡æ•°æ®åº“ï¼ˆç”µå­ã€ç”µæ°”ã€è®¡ç®—æœºã€ä¿¡æ¯æŠ€æœ¯ï¼‰
                    </div>
                    <div class="dev-note-item">
                        <strong>ACM Digital Library</strong>ï¼šhttps://dl.acm.org/ - ç¾å›½è®¡ç®—æœºåä¼šæ•°å­—å›¾ä¹¦é¦†ï¼ˆè®¡ç®—æœºç§‘å­¦æœŸåˆŠã€ä¼šè®®è®ºæ–‡ï¼‰
                    </div>
                    <div class="dev-note-item">
                        <strong>Science</strong>ï¼šhttps://www.science.org/ - ç¾å›½ç§‘å­¦ä¿ƒè¿›ä¼šï¼ˆAAASï¼‰ç§‘å­¦æœŸåˆŠ
                    </div>
                    <div class="dev-note-item">
                        <strong>Wiley Online Library</strong>ï¼šhttps://onlinelibrary.wiley.com/ - Wileyå‡ºç‰ˆé›†å›¢åœ¨çº¿å›¾ä¹¦é¦†ï¼ˆå¤šå­¦ç§‘æœŸåˆŠå’Œç”µå­ä¹¦ï¼‰
                    </div>
                    <div class="dev-note-item">
                        <strong>Springer Nature</strong>ï¼šhttps://www.springernature.com/ - Springerå’ŒNatureåˆå¹¶çš„å…¨çƒç§‘å­¦å‡ºç‰ˆå•†
                    </div>
                    <div class="dev-note-item">
                        <strong>arXiv</strong>ï¼šhttps://arxiv.org/ - åº·å¥ˆå°”å¤§å­¦å¼€æ”¾è·å–é¢„å°æœ¬æœåŠ¡å™¨ï¼ˆç‰©ç†ã€æ•°å­¦ã€è®¡ç®—æœºç§‘å­¦ï¼‰
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- é—®ç­”å†å²/ç»“æœåŒºåŸŸ -->
    <div class="qa-results-section" id="qaResultsSection" style="display: none;">
        <div class="qa-conversation" id="qaConversation">
            <!-- å¯¹è¯å†…å®¹å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
        </div>
    </div>
</div>

<style>
/* å­¦æœ¯é—®ç­”é¡µé¢æ ·å¼ */
.academic-qa-page {
    padding: 24px;
    max-width: 1200px;
    margin: 0 auto;
}

.academic-qa-header {
    text-align: center;
    margin-bottom: 32px;
}

.academic-qa-title-section {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 12px;
    margin-bottom: 8px;
}

.academic-qa-icon {
    font-size: 48px;
}

.academic-qa-title {
    font-size: 36px;
    font-weight: 600;
    color: #1a1a1a;
    margin: 0;
}


.academic-qa-subtitle {
    font-size: 16px;
    color: #666;
    margin: 0;
}

/* é—®ç­”æ¨¡å¼é€‰æ‹©å™¨ */
.qa-mode-selector {
    display: flex;
    justify-content: center;
    gap: 8px;
    margin-bottom: 24px;
}

.mode-btn {
    padding: 8px 24px;
    border: 1px solid #d9d9d9;
    border-radius: 20px;
    background: #fff;
    color: #666;
    font-size: 14px;
    cursor: pointer;
    transition: all 0.3s;
}

.mode-btn:hover {
    border-color: #1890ff;
    color: #1890ff;
}

.mode-btn.active {
    background: #1890ff;
    border-color: #1890ff;
    color: #fff;
}

/* é—®é¢˜è¾“å…¥åŒºåŸŸ */
.qa-input-section {
    margin-bottom: 32px;
}

.qa-input-container {
    position: relative;
    margin-bottom: 16px;
}

.qa-input {
    width: 100%;
    padding: 16px 80px 16px 16px;
    border: 1px solid #d9d9d9;
    border-radius: 8px;
    font-size: 16px;
    resize: vertical;
    min-height: 120px;
    font-family: inherit;
    transition: border-color 0.3s;
}

.qa-input:focus {
    outline: none;
    border-color: #1890ff;
    box-shadow: 0 0 0 2px rgba(24, 144, 255, 0.1);
}

.qa-input-actions {
    position: absolute;
    right: 12px;
    bottom: 12px;
    display: flex;
    gap: 8px;
}

.qa-action-btn {
    width: 36px;
    height: 36px;
    border: none;
    border-radius: 50%;
    background: #f0f0f0;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 18px;
    transition: all 0.3s;
}

.qa-action-btn:hover {
    background: #e0e0e0;
}

.qa-submit-btn {
    background: #1890ff;
    color: #fff;
}

.qa-submit-btn:hover {
    background: #40a9ff;
}

/* é€‰é¡¹æ  */
.qa-options-bar {
    display: flex;
    gap: 12px;
    justify-content: center;
    margin-bottom: 24px;
}

.qa-option-btn {
    padding: 8px 16px;
    border: 1px solid #d9d9d9;
    border-radius: 6px;
    background: #fff;
    color: #666;
    font-size: 14px;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 6px;
    transition: all 0.3s;
}

.qa-option-btn:hover {
    border-color: #1890ff;
    color: #1890ff;
}

.qa-model-selector {
    position: relative;
}

.dropdown-arrow {
    font-size: 10px;
    margin-left: 4px;
}

.model-dropdown {
    position: absolute;
    top: 100%;
    left: 0;
    margin-top: 4px;
    background: #fff;
    border: 1px solid #d9d9d9;
    border-radius: 6px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    z-index: 100;
    min-width: 120px;
}

.model-option {
    padding: 10px 16px;
    cursor: pointer;
    transition: background 0.2s;
}

.model-option:hover {
    background: #f0f0f0;
}

.model-option:first-child {
    border-radius: 6px 6px 0 0;
}

.model-option:last-child {
    border-radius: 0 0 6px 6px;
}

/* å­¦æœ¯èµ„æºLogo */
.academic-resources {
    text-align: center;
}

.resources-label {
    font-size: 14px;
    color: #999;
    margin-bottom: 12px;
}

.resources-logos {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 24px;
    flex-wrap: wrap;
}

.resource-logo {
    padding: 10px 16px;
    background: #f5f5f5;
    border-radius: 6px;
    font-size: 12px;
    font-weight: 500;
    color: #666;
    transition: all 0.3s;
    text-align: center;
    min-width: 120px;
}

.resource-logo:hover {
    background: #e6f7ff;
    color: #1890ff;
}

.logo-text {
    white-space: nowrap;
    font-weight: 600;
    margin-bottom: 4px;
}

.logo-url {
    font-size: 10px;
    color: #999;
    white-space: nowrap;
}

/* ç ”å‘è¯´æ˜åŒºåŸŸ */
.dev-notes {
    margin-top: 24px;
    padding: 16px;
    background: #f9f9f9;
    border: 1px solid #e8e8e8;
    border-radius: 8px;
    border-left: 4px solid #1890ff;
}

.dev-notes-title {
    font-size: 14px;
    font-weight: 600;
    color: #1a1a1a;
    margin-bottom: 12px;
}

.dev-notes-content {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.dev-note-item {
    font-size: 13px;
    color: #666;
    line-height: 1.6;
    padding: 8px;
    background: #fff;
    border-radius: 4px;
}

.dev-note-item strong {
    color: #1890ff;
    font-weight: 600;
}

/* é—®ç­”ç»“æœåŒºåŸŸ */
.qa-results-section {
    margin-top: 32px;
}

.qa-conversation {
    max-width: 900px;
    margin: 0 auto;
}

.qa-message {
    margin-bottom: 24px;
    padding: 16px;
    border-radius: 8px;
}

.qa-message.user {
    background: #e6f7ff;
    margin-left: 20%;
}

.qa-message.assistant {
    background: #f5f5f5;
    margin-right: 20%;
}

.qa-message-header {
    font-weight: 600;
    margin-bottom: 8px;
    color: #1a1a1a;
}

.qa-message-content {
    color: #333;
    line-height: 1.6;
    white-space: pre-wrap;
}

.qa-loading {
    text-align: center;
    padding: 24px;
    color: #999;
}
</style>

<script>
// å½“å‰é—®ç­”æ¨¡å¼
let currentQAMode = 'academic';
let currentModel = 'standard';
let isDeepResearch = false;

// åˆ‡æ¢é—®ç­”æ¨¡å¼
function switchQAMode(mode) {
    currentQAMode = mode;
    document.getElementById('modeFullWeb').classList.toggle('active', mode === 'fullweb');
    document.getElementById('modeAcademic').classList.toggle('active', mode === 'academic');
}

// åˆ‡æ¢æ·±åº¦ç ”ç©¶
function toggleDeepResearch() {
    isDeepResearch = !isDeepResearch;
    const btn = document.getElementById('deepResearchBtn');
    if (isDeepResearch) {
        btn.style.background = '#1890ff';
        btn.style.color = '#fff';
        btn.style.borderColor = '#1890ff';
    } else {
        btn.style.background = '#fff';
        btn.style.color = '#666';
        btn.style.borderColor = '#d9d9d9';
    }
}

// åˆ‡æ¢æ¨¡å‹ä¸‹æ‹‰èœå•
function toggleModelDropdown() {
    const dropdown = document.getElementById('modelDropdown');
    dropdown.style.display = dropdown.style.display === 'none' ? 'block' : 'none';
}

// é€‰æ‹©æ¨¡å‹
function selectModel(model) {
    currentModel = model;
    const btn = document.getElementById('modelSelectBtn');
    const modelNames = {
        'standard': 'æ ‡å‡†æ¨¡å‹',
        'advanced': 'é«˜çº§æ¨¡å‹',
        'expert': 'ä¸“å®¶æ¨¡å‹'
    };
    btn.querySelector('span:first-child').textContent = modelNames[model];
    document.getElementById('modelDropdown').style.display = 'none';
}

// å¼€å§‹è¯­éŸ³è¾“å…¥
function startVoiceInput() {
    alert('è¯­éŸ³è¾“å…¥åŠŸèƒ½ï¼ˆæ¨¡æ‹Ÿï¼‰\n\nå®é™…åº”ç”¨ä¸­åº”è°ƒç”¨è¯­éŸ³è¯†åˆ«API');
}

// æäº¤é—®é¢˜
function submitQuestion() {
    const input = document.getElementById('qaQuestionInput');
    const question = input.value.trim();
    
    if (!question) {
        alert('è¯·è¾“å…¥æ‚¨çš„é—®é¢˜');
        return;
    }
    
    // æ˜¾ç¤ºç»“æœåŒºåŸŸ
    const resultsSection = document.getElementById('qaResultsSection');
    resultsSection.style.display = 'block';
    
    // æ·»åŠ ç”¨æˆ·é—®é¢˜
    addMessage('user', question);
    
    // æ¸…ç©ºè¾“å…¥æ¡†
    input.value = '';
    
    // æ˜¾ç¤ºåŠ è½½çŠ¶æ€
    const loadingId = addMessage('assistant', 'æ­£åœ¨æ€è€ƒä¸­...', true);
    
    // æ¨¡æ‹ŸAIå›ç­”
    setTimeout(() => {
        const mockAnswer = generateMockAnswer(question);
        updateMessage(loadingId, 'assistant', mockAnswer);
    }, 2000);
}

// æ·»åŠ æ¶ˆæ¯
function addMessage(role, content, isLoading = false) {
    const conversation = document.getElementById('qaConversation');
    const messageId = 'msg-' + Date.now();
    const messageClass = isLoading ? 'qa-loading' : 'qa-message ' + role;
    
    const messageHTML = `
        <div class="${messageClass}" id="${messageId}">
            <div class="qa-message-header">${role === 'user' ? 'æ‚¨çš„é—®é¢˜' : 'AIå›ç­”'}</div>
            <div class="qa-message-content">${content}</div>
        </div>
    `;
    
    conversation.insertAdjacentHTML('beforeend', messageHTML);
    
    // æ»šåŠ¨åˆ°åº•éƒ¨
    conversation.scrollTop = conversation.scrollHeight;
    
    return messageId;
}

// æ›´æ–°æ¶ˆæ¯
function updateMessage(messageId, role, content) {
    const messageEl = document.getElementById(messageId);
    if (messageEl) {
        messageEl.className = 'qa-message ' + role;
        messageEl.querySelector('.qa-message-content').textContent = content;
    }
}

// ç”Ÿæˆæ¨¡æ‹Ÿå›ç­”
function generateMockAnswer(question) {
    const answers = [
        `æ ¹æ®æ‚¨çš„é—®é¢˜"${question}"ï¼Œæˆ‘ä¸ºæ‚¨æ•´ç†äº†ä»¥ä¸‹å­¦æœ¯è§‚ç‚¹ï¼š\n\n1. ç›¸å…³ç ”ç©¶æ˜¾ç¤ºï¼Œè¯¥é¢†åŸŸåœ¨è¿‘å¹´æ¥å–å¾—äº†æ˜¾è‘—è¿›å±•ã€‚\n2. å¤šé¡¹ç ”ç©¶è¡¨æ˜ï¼Œè¯¥é—®é¢˜æ¶‰åŠå¤šä¸ªç»´åº¦çš„è€ƒé‡ã€‚\n3. å»ºè®®è¿›ä¸€æ­¥æŸ¥é˜…ç›¸å…³æ–‡çŒ®ä»¥è·å¾—æ›´æ·±å…¥çš„ç†è§£ã€‚\n\nå‚è€ƒæ–‡çŒ®ï¼š\n- Author A, et al. (2023). Title of Study. Journal Name.\n- Author B, et al. (2022). Another Study. Journal Name.`,
        `å…³äº"${question}"è¿™ä¸ªé—®é¢˜ï¼Œå­¦æœ¯ç•Œæœ‰ä»¥ä¸‹ä¸»è¦è§‚ç‚¹ï¼š\n\nâ€¢ ä¸»æµè§‚ç‚¹è®¤ä¸º...\nâ€¢ éƒ¨åˆ†å­¦è€…æå‡º...\nâ€¢ æœ€æ–°ç ”ç©¶æ˜¾ç¤º...\n\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¯¥é¢†åŸŸä»å­˜åœ¨ä¸€äº›äº‰è®®ï¼Œå»ºè®®ç»“åˆå…·ä½“ç ”ç©¶åœºæ™¯è¿›è¡Œåˆ¤æ–­ã€‚`,
        `é’ˆå¯¹æ‚¨çš„é—®é¢˜ï¼Œæˆ‘åŸºäºå­¦æœ¯æ•°æ®åº“æ£€ç´¢åˆ°ä»¥ä¸‹ä¿¡æ¯ï¼š\n\næ ¹æ®PubMedã€IEEEç­‰æ•°æ®åº“çš„ç›¸å…³æ–‡çŒ®ï¼Œè¯¥é—®é¢˜å¯ä»¥ä»ä»¥ä¸‹å‡ ä¸ªè§’åº¦åˆ†æï¼š\n\n1. ç†è®ºåŸºç¡€\n2. å®è¯ç ”ç©¶\n3. åº”ç”¨å®è·µ\n\nä»¥ä¸Šå†…å®¹åŸºäºå½“å‰å­¦æœ¯èµ„æºæ•´ç†ï¼Œä»…ä¾›å‚è€ƒã€‚`
    ];
    
    return answers[Math.floor(Math.random() * answers.length)];
}

// ç‚¹å‡»å¤–éƒ¨å…³é—­ä¸‹æ‹‰èœå•
document.addEventListener('click', function(e) {
    const dropdown = document.getElementById('modelDropdown');
    const btn = document.getElementById('modelSelectBtn');
    if (!btn.contains(e.target) && !dropdown.contains(e.target)) {
        dropdown.style.display = 'none';
    }
});

// æ”¯æŒEnteré”®æäº¤ï¼ˆCtrl+Enterï¼‰
document.getElementById('qaQuestionInput').addEventListener('keydown', function(e) {
    if (e.key === 'Enter' && e.ctrlKey) {
        submitQuestion();
    }
});

// åˆå§‹åŒ–é¡µé¢
function initPage_research_academic_qa() {
    console.log('å­¦æœ¯é—®ç­”é¡µé¢å·²åŠ è½½');
}
</script>
