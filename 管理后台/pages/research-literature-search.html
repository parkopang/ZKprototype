<!-- ç§‘ç ”è¶…çº§æ™ºèƒ½ä½“ï¼šæ–‡çŒ®æ£€ç´¢é¡µé¢ -->
<div class="literature-search-page">
    <div class="literature-header">
        <div class="literature-title-section">
            <div class="literature-icon">ğŸ“š</div>
            <h1 class="literature-title">æ–‡çŒ®æ£€ç´¢</h1>
        </div>
        <p class="literature-subtitle">æ™ºèƒ½ç­›é€‰Â·å¤šç»´æ£€ç´¢Â·ç²¾å‡†å®šä½</p>
    </div>
    
    <div class="literature-search-section">
        <div class="literature-search-box">
            <input type="text" class="literature-search-input" placeholder="è¯·è¾“å…¥å…³é”®è¯ã€æ ‡é¢˜ã€ä½œè€…æˆ–DOIè¿›è¡Œæ£€ç´¢" id="literatureSearchKeyword">
            <div class="literature-search-actions">
                <button class="literature-advanced-btn" onclick="toggleAdvancedSearch()" title="é«˜çº§æ£€ç´¢">âš™ï¸</button>
                <button class="literature-search-btn" onclick="event.preventDefault(); event.stopPropagation(); performLiteratureSearch(); return false;">ğŸ”</button>
            </div>
        </div>
        
        <!-- é«˜çº§æ£€ç´¢é¢æ¿ -->
        <div class="advanced-search-panel" id="advancedSearchPanel" style="display: none;">
            <div class="advanced-search-content">
                <div class="advanced-search-row">
                    <div class="advanced-search-item">
                        <label class="advanced-label">æ ‡é¢˜</label>
                        <input type="text" class="advanced-input" placeholder="è¯·è¾“å…¥æ ‡é¢˜å…³é”®è¯" id="titleKeyword">
                    </div>
                    <div class="advanced-search-item">
                        <label class="advanced-label">ä½œè€…</label>
                        <input type="text" class="advanced-input" placeholder="è¯·è¾“å…¥ä½œè€…å§“å" id="authorKeyword">
                    </div>
                    <div class="advanced-search-item">
                        <label class="advanced-label">æœŸåˆŠ/ä¼šè®®</label>
                        <input type="text" class="advanced-input" placeholder="è¯·è¾“å…¥æœŸåˆŠæˆ–ä¼šè®®åç§°" id="journalKeyword">
                    </div>
                </div>
                <div class="advanced-search-row">
                    <div class="advanced-search-item">
                        <label class="advanced-label">å‘è¡¨å¹´ä»½</label>
                        <div class="year-range">
                            <input type="number" class="advanced-input" placeholder="èµ·å§‹å¹´ä»½" id="yearFrom" min="1900" max="2025">
                            <span>è‡³</span>
                            <input type="number" class="advanced-input" placeholder="ç»“æŸå¹´ä»½" id="yearTo" min="1900" max="2025">
                        </div>
                    </div>
                    <div class="advanced-search-item">
                        <label class="advanced-label">æ–‡çŒ®ç±»å‹</label>
                        <select class="advanced-select" id="literatureType">
                            <option value="">å…¨éƒ¨</option>
                            <option value="article">æœŸåˆŠè®ºæ–‡</option>
                            <option value="conference">ä¼šè®®è®ºæ–‡</option>
                            <option value="book">å›¾ä¹¦</option>
                            <option value="thesis">å­¦ä½è®ºæ–‡</option>
                            <option value="patent">ä¸“åˆ©</option>
                        </select>
                    </div>
                    <div class="advanced-search-item">
                        <label class="advanced-label">è¯­è¨€</label>
                        <select class="advanced-select" id="language">
                            <option value="">å…¨éƒ¨</option>
                            <option value="zh">ä¸­æ–‡</option>
                            <option value="en">è‹±æ–‡</option>
                            <option value="other">å…¶ä»–</option>
                        </select>
                    </div>
                </div>
                <div class="advanced-search-actions">
                    <button class="btn btn-default" onclick="resetAdvancedSearch()">é‡ç½®</button>
                    <button class="btn btn-primary" onclick="applyAdvancedSearch()">åº”ç”¨ç­›é€‰</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- ç­›é€‰å·¥å…·æ  -->
    <div class="literature-filter-bar">
        <div class="filter-left">
            <span class="filter-label">æ’åºï¼š</span>
            <select class="filter-select" id="sortBy" onchange="performLiteratureSearch()">
                <option value="relevance">ç›¸å…³åº¦</option>
                <option value="date_desc">æœ€æ–°å‘è¡¨</option>
                <option value="date_asc">æœ€æ—©å‘è¡¨</option>
                <option value="citation_desc">å¼•ç”¨æ¬¡æ•°ï¼ˆé«˜åˆ°ä½ï¼‰</option>
                <option value="citation_asc">å¼•ç”¨æ¬¡æ•°ï¼ˆä½åˆ°é«˜ï¼‰</option>
            </select>
            <button class="smart-filter-btn" onclick="openSmartFilter()">
                <span>ğŸ”</span>
                <span>æ™ºèƒ½ç­›é€‰</span>
            </button>
        </div>
        <div class="filter-right">
            <span class="result-count" id="resultCount">å…±æ‰¾åˆ° 0 æ¡ç»“æœ</span>
        </div>
    </div>
    
    <!-- æ™ºèƒ½ç­›é€‰æ¨¡æ€æ¡† -->
    <div class="smart-filter-modal" id="smartFilterModal" style="display: none;">
        <div class="smart-filter-overlay" onclick="closeSmartFilter()"></div>
        <div class="smart-filter-content">
            <div class="smart-filter-header">
                <h3 class="smart-filter-title">ç­›é€‰</h3>
                <button class="smart-filter-close" onclick="closeSmartFilter()">Ã—</button>
            </div>
            <div class="smart-filter-body">
                <!-- è¯­è¨€ç±»å‹ -->
                <div class="filter-section">
                    <label class="filter-section-label">è¯­è¨€ç±»å‹</label>
                    <div class="radio-group">
                        <label class="radio-label">
                            <input type="radio" name="languageType" value="all" checked>
                            <span>ä¸é™</span>
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="languageType" value="zh">
                            <span>ä¸­æ–‡</span>
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="languageType" value="en">
                            <span>è‹±æ–‡</span>
                        </label>
                    </div>
                </div>
                
                <!-- å‘å¸ƒæ—¶é—´ -->
                <div class="filter-section">
                    <label class="filter-section-label">å‘å¸ƒæ—¶é—´</label>
                    <div class="range-slider-container">
                        <div class="range-slider">
                            <input type="range" id="yearRangeMin" min="1920" max="2025" value="1920" class="range-input">
                            <input type="range" id="yearRangeMax" min="1920" max="2025" value="2025" class="range-input">
                        </div>
                        <div class="range-labels">
                            <span id="yearMinLabel">1920</span>
                            <span>è‡³</span>
                            <span id="yearMaxLabel">2025</span>
                        </div>
                    </div>
                </div>
                
                <!-- æœŸåˆŠç­‰çº§ -->
                <div class="filter-section">
                    <label class="filter-section-label">æœŸåˆŠç­‰çº§</label>
                    <div class="range-slider-container">
                        <div class="journal-level-slider">
                            <input type="range" id="journalLevelMin" min="0" max="4" value="0" step="1" class="range-input">
                            <input type="range" id="journalLevelMax" min="0" max="4" value="4" step="1" class="range-input">
                        </div>
                        <div class="journal-level-labels">
                            <span>Q1</span>
                            <span>Q2</span>
                            <span>Q3</span>
                            <span>Q4</span>
                            <span>All</span>
                        </div>
                        <div class="range-labels">
                            <span id="journalLevelMinLabel">Q1</span>
                            <span>è‡³</span>
                            <span id="journalLevelMaxLabel">All</span>
                        </div>
                    </div>
                </div>
                
                <!-- æœŸåˆŠæ ‡ç­¾ -->
                <div class="filter-section">
                    <label class="filter-section-label">æœŸåˆŠæ ‡ç­¾</label>
                    <div class="tag-input-container">
                        <input type="text" class="tag-input" id="journalTagInput" placeholder="è¾“å…¥æ ‡ç­¾ï¼ŒæŒ‰å›è½¦æ·»åŠ ">
                        <div class="tag-list" id="journalTagList">
                            <!-- æ ‡ç­¾å°†é€šè¿‡JavaScriptåŠ¨æ€æ·»åŠ  -->
                        </div>
                    </div>
                </div>
                
                <!-- æœ‰æ— PDF -->
                <div class="filter-section">
                    <label class="filter-section-label">æœ‰æ— PDF</label>
                    <label class="toggle-switch">
                        <input type="checkbox" id="hasPDF">
                        <span class="toggle-slider"></span>
                    </label>
                </div>
            </div>
            <div class="smart-filter-footer">
                <button class="btn btn-default" onclick="resetSmartFilter()">é‡ç½®</button>
                <button class="btn btn-primary" onclick="applySmartFilter()">ç¡®å®š</button>
            </div>
        </div>
    </div>
    
    <!-- æ£€ç´¢ç»“æœåˆ—è¡¨ -->
    <div class="literature-results-section" id="literatureResults">
        <div class="empty-state" id="emptyState">
            <div class="empty-icon">ğŸ“–</div>
            <div class="empty-text">è¯·è¾“å…¥å…³é”®è¯å¼€å§‹æ£€ç´¢</div>
            <div class="empty-desc">æ”¯æŒæ ‡é¢˜ã€ä½œè€…ã€å…³é”®è¯ã€æ‘˜è¦ç­‰å¤šç»´åº¦æ£€ç´¢</div>
        </div>
        
        <div class="literature-results-list" id="literatureResultsList" style="display: none;">
            <!-- ç»“æœå°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
        </div>
    </div>
    
    <!-- åˆ†é¡µ -->
    <div class="literature-pagination" id="literaturePagination" style="display: none;">
        <button class="pagination-btn" id="prevPage" onclick="changePage(-1)">ä¸Šä¸€é¡µ</button>
        <span class="pagination-info" id="pageInfo">ç¬¬ 1 é¡µï¼Œå…± 1 é¡µ</span>
        <button class="pagination-btn" id="nextPage" onclick="changePage(1)">ä¸‹ä¸€é¡µ</button>
    </div>
</div>

<style>
.literature-search-page {
    padding: 24px;
    max-width: 1400px;
    margin: 0 auto;
}

.literature-header {
    text-align: center;
    margin-bottom: 32px;
}

.literature-title-section {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 12px;
    margin-bottom: 12px;
}

.literature-icon {
    font-size: 32px;
}

.literature-title {
    font-size: 28px;
    font-weight: 600;
    margin: 0;
    color: #1a1a1a;
}

.literature-subtitle {
    font-size: 16px;
    color: #666;
    margin: 0;
}

.literature-search-section {
    margin-bottom: 24px;
}

.literature-search-box {
    display: flex;
    align-items: center;
    background: #fff;
    border: 2px solid #e8e8e8;
    border-radius: 12px;
    padding: 12px 16px;
    transition: border-color 0.3s;
}

.literature-search-box:focus-within {
    border-color: #1890ff;
}

.literature-search-input {
    flex: 1;
    border: none;
    outline: none;
    font-size: 16px;
    padding: 8px 0;
}

.literature-search-actions {
    display: flex;
    gap: 8px;
    align-items: center;
}

.literature-advanced-btn,
.literature-search-btn {
    background: none;
    border: none;
    cursor: pointer;
    font-size: 20px;
    padding: 8px;
    border-radius: 6px;
    transition: background 0.2s;
}

.literature-advanced-btn:hover,
.literature-search-btn:hover {
    background: #f5f5f5;
}

/* é«˜çº§æ£€ç´¢é¢æ¿ */
.advanced-search-panel {
    background: #fff;
    border: 1px solid #e8e8e8;
    border-radius: 8px;
    padding: 20px;
    margin-top: 16px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.08);
}

.advanced-search-content {
    display: flex;
    flex-direction: column;
    gap: 16px;
}

.advanced-search-row {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 16px;
}

.advanced-search-item {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.advanced-label {
    font-size: 14px;
    color: #333;
    font-weight: 500;
}

.advanced-input,
.advanced-select {
    padding: 8px 12px;
    border: 1px solid #d9d9d9;
    border-radius: 6px;
    font-size: 14px;
    transition: border-color 0.2s;
}

.advanced-input:focus,
.advanced-select:focus {
    outline: none;
    border-color: #1890ff;
}

.year-range {
    display: flex;
    align-items: center;
    gap: 8px;
}

.year-range input {
    flex: 1;
}

.advanced-search-actions {
    display: flex;
    gap: 12px;
    justify-content: flex-end;
    margin-top: 8px;
}

.btn {
    padding: 8px 16px;
    border-radius: 6px;
    border: 1px solid #d9d9d9;
    cursor: pointer;
    font-size: 14px;
    transition: all 0.2s;
}

.btn-default {
    background: #fff;
    color: #333;
}

.btn-default:hover {
    background: #f5f5f5;
}

.btn-primary {
    background: #1890ff;
    color: #fff;
    border-color: #1890ff;
}

.btn-primary:hover {
    background: #40a9ff;
    border-color: #40a9ff;
}

/* ç­›é€‰å·¥å…·æ  */
.literature-filter-bar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 16px;
    background: #fff;
    border-radius: 8px;
    margin-bottom: 16px;
    box-shadow: 0 1px 4px rgba(0,0,0,0.08);
}

.filter-left {
    display: flex;
    align-items: center;
    gap: 8px;
}

.filter-label {
    font-size: 14px;
    color: #666;
}

.filter-select {
    padding: 6px 12px;
    border: 1px solid #d9d9d9;
    border-radius: 6px;
    font-size: 14px;
    cursor: pointer;
}

.smart-filter-btn {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 6px 16px;
    border: 1px solid #1890ff;
    border-radius: 6px;
    background: #fff;
    color: #1890ff;
    font-size: 14px;
    cursor: pointer;
    transition: all 0.2s;
    margin-left: 16px;
}

.smart-filter-btn:hover {
    background: #e6f7ff;
    border-color: #40a9ff;
}

.filter-right {
    font-size: 14px;
    color: #666;
}

.result-count {
    font-weight: 500;
    color: #333;
}

/* æ£€ç´¢ç»“æœ */
.literature-results-section {
    background: #fff;
    border-radius: 8px;
    padding: 24px;
    min-height: 400px;
    box-shadow: 0 1px 4px rgba(0,0,0,0.08);
}

.empty-state {
    text-align: center;
    padding: 60px 20px;
}

.empty-icon {
    font-size: 64px;
    margin-bottom: 16px;
}

.empty-text {
    font-size: 18px;
    font-weight: 500;
    color: #333;
    margin-bottom: 8px;
}

.empty-desc {
    font-size: 14px;
    color: #999;
}

.literature-results-list {
    display: flex;
    flex-direction: column;
    gap: 16px;
}

.literature-result-item {
    padding: 20px;
    border: 1px solid #e8e8e8;
    border-radius: 8px;
    transition: all 0.2s;
    cursor: pointer;
}

.literature-result-item:hover {
    border-color: #1890ff;
    box-shadow: 0 2px 8px rgba(24, 144, 255, 0.1);
}

.result-item-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 12px;
}

.result-item-title {
    font-size: 18px;
    font-weight: 600;
    color: #1890ff;
    margin: 0;
    flex: 1;
    line-height: 1.5;
}

.result-item-title:hover {
    text-decoration: underline;
}

.result-item-actions {
    display: flex;
    gap: 8px;
    margin-left: 16px;
}

.result-item-action-btn {
    padding: 6px 12px;
    border: 1px solid #d9d9d9;
    border-radius: 4px;
    background: #fff;
    cursor: pointer;
    font-size: 12px;
    transition: all 0.2s;
}

.result-item-action-btn:hover {
    background: #f5f5f5;
    border-color: #1890ff;
    color: #1890ff;
}

.result-item-meta {
    display: flex;
    flex-wrap: wrap;
    gap: 16px;
    margin-bottom: 12px;
    font-size: 14px;
    color: #666;
}

.result-item-meta-item {
    display: flex;
    align-items: center;
    gap: 4px;
}

.result-item-abstract {
    font-size: 14px;
    color: #666;
    line-height: 1.6;
    margin-bottom: 12px;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
}

.result-item-tags {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
}

.result-item-tag {
    padding: 4px 8px;
    background: #f0f0f0;
    border-radius: 4px;
    font-size: 12px;
    color: #666;
}

/* åˆ†é¡µ */
.literature-pagination {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 16px;
    padding: 24px;
    background: #fff;
    border-radius: 8px;
    margin-top: 16px;
}

.pagination-btn {
    padding: 8px 16px;
    border: 1px solid #d9d9d9;
    border-radius: 6px;
    background: #fff;
    cursor: pointer;
    font-size: 14px;
    transition: all 0.2s;
}

.pagination-btn:hover:not(:disabled) {
    background: #f5f5f5;
    border-color: #1890ff;
    color: #1890ff;
}

.pagination-btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
}

.pagination-info {
    font-size: 14px;
    color: #666;
}

/* æ™ºèƒ½ç­›é€‰æ¨¡æ€æ¡† */
.smart-filter-modal {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    z-index: 1000;
    display: flex;
    align-items: center;
    justify-content: flex-end;
}

.smart-filter-overlay {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.3);
}

.smart-filter-content {
    position: relative;
    width: 400px;
    max-width: 90vw;
    height: 100vh;
    background: #fff;
    box-shadow: -2px 0 8px rgba(0, 0, 0, 0.15);
    display: flex;
    flex-direction: column;
    z-index: 1001;
    overflow-y: auto;
}

.smart-filter-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 20px;
    border-bottom: 1px solid #e8e8e8;
}

.smart-filter-title {
    font-size: 18px;
    font-weight: 600;
    margin: 0;
    color: #1a1a1a;
}

.smart-filter-close {
    background: none;
    border: none;
    font-size: 24px;
    color: #999;
    cursor: pointer;
    padding: 0;
    width: 24px;
    height: 24px;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: color 0.2s;
}

.smart-filter-close:hover {
    color: #333;
}

.smart-filter-body {
    flex: 1;
    padding: 20px;
    overflow-y: auto;
}

.filter-section {
    margin-bottom: 24px;
}

.filter-section-label {
    display: block;
    font-size: 14px;
    font-weight: 500;
    color: #333;
    margin-bottom: 12px;
}

/* å•é€‰æŒ‰é’®ç»„ */
.radio-group {
    display: flex;
    gap: 16px;
}

.radio-label {
    display: flex;
    align-items: center;
    gap: 6px;
    cursor: pointer;
    font-size: 14px;
    color: #333;
}

.radio-label input[type="radio"] {
    width: 16px;
    height: 16px;
    cursor: pointer;
}

/* èŒƒå›´æ»‘å— */
.range-slider-container {
    display: flex;
    flex-direction: column;
    gap: 12px;
}

.range-slider {
    position: relative;
    height: 6px;
    background: #e8e8e8;
    border-radius: 3px;
}

.range-slider .range-input {
    position: absolute;
    width: 100%;
    height: 6px;
    -webkit-appearance: none;
    appearance: none;
    background: transparent;
    pointer-events: none;
}

.range-slider .range-input::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    width: 16px;
    height: 16px;
    background: #1890ff;
    border-radius: 50%;
    cursor: pointer;
    pointer-events: all;
    position: relative;
    z-index: 2;
}

.range-slider .range-input::-moz-range-thumb {
    width: 16px;
    height: 16px;
    background: #1890ff;
    border: none;
    border-radius: 50%;
    cursor: pointer;
    pointer-events: all;
}

.range-slider .range-input:first-of-type {
    z-index: 3;
}

.range-slider .range-input:last-of-type {
    z-index: 1;
}

.range-labels {
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-size: 14px;
    color: #666;
}

/* æœŸåˆŠç­‰çº§æ»‘å— */
.journal-level-slider {
    position: relative;
    height: 6px;
    background: #e8e8e8;
    border-radius: 3px;
    margin-bottom: 8px;
}

.journal-level-labels {
    display: flex;
    justify-content: space-between;
    font-size: 12px;
    color: #999;
    margin-bottom: 8px;
}

.journal-level-slider .range-input {
    position: absolute;
    width: 100%;
    height: 6px;
    -webkit-appearance: none;
    appearance: none;
    background: transparent;
    pointer-events: none;
}

.journal-level-slider .range-input::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    width: 16px;
    height: 16px;
    background: #1890ff;
    border-radius: 50%;
    cursor: pointer;
    pointer-events: all;
    position: relative;
    z-index: 2;
}

.journal-level-slider .range-input::-moz-range-thumb {
    width: 16px;
    height: 16px;
    background: #1890ff;
    border: none;
    border-radius: 50%;
    cursor: pointer;
    pointer-events: all;
}

/* æ ‡ç­¾è¾“å…¥ */
.tag-input-container {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.tag-input {
    padding: 8px 12px;
    border: 1px solid #d9d9d9;
    border-radius: 6px;
    font-size: 14px;
}

.tag-input:focus {
    outline: none;
    border-color: #1890ff;
}

.tag-list {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
}

.tag-item {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 4px 8px;
    background: #e6f7ff;
    border: 1px solid #91d5ff;
    border-radius: 4px;
    font-size: 12px;
    color: #1890ff;
}

.tag-remove {
    background: none;
    border: none;
    color: #1890ff;
    cursor: pointer;
    font-size: 14px;
    padding: 0;
    width: 16px;
    height: 16px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.tag-remove:hover {
    color: #40a9ff;
}

/* å¼€å…³åˆ‡æ¢ */
.toggle-switch {
    position: relative;
    display: inline-block;
    width: 44px;
    height: 24px;
}

.toggle-switch input {
    opacity: 0;
    width: 0;
    height: 0;
}

.toggle-slider {
    position: absolute;
    cursor: pointer;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: #ccc;
    transition: 0.3s;
    border-radius: 24px;
}

.toggle-slider:before {
    position: absolute;
    content: "";
    height: 18px;
    width: 18px;
    left: 3px;
    bottom: 3px;
    background-color: white;
    transition: 0.3s;
    border-radius: 50%;
}

.toggle-switch input:checked + .toggle-slider {
    background-color: #1890ff;
}

.toggle-switch input:checked + .toggle-slider:before {
    transform: translateX(20px);
}

.smart-filter-footer {
    display: flex;
    gap: 12px;
    padding: 20px;
    border-top: 1px solid #e8e8e8;
    justify-content: flex-end;
}
</style>

<script>
// å½“å‰é¡µç 
let currentPage = 1;
let totalPages = 1;
let currentResults = [];

// æ‰§è¡Œæ–‡çŒ®æ£€ç´¢
function performLiteratureSearch() {
    try {
        const keyword = document.getElementById('literatureSearchKeyword')?.value.trim() || '';
        
        // æ˜¾ç¤ºåŠ è½½çŠ¶æ€
        const resultsList = document.getElementById('literatureResultsList');
        const emptyState = document.getElementById('emptyState');
        
        if (!resultsList || !emptyState) {
            console.error('æ–‡çŒ®æ£€ç´¢é¡µé¢å…ƒç´ æœªæ‰¾åˆ°', { resultsList: !!resultsList, emptyState: !!emptyState });
            alert('é¡µé¢å…ƒç´ åŠ è½½å¼‚å¸¸ï¼Œè¯·åˆ·æ–°é¡µé¢é‡è¯•');
            return;
        }
        
        emptyState.style.display = 'none';
        resultsList.style.display = 'block';
        resultsList.innerHTML = '<div style="text-align: center; padding: 40px; color: #999;">æ­£åœ¨æ£€ç´¢æ–‡çŒ®...</div>';
        
        // è·å–ç­›é€‰æ¡ä»¶
        const sortBy = document.getElementById('sortBy')?.value || 'relevance';
    
    // æ¨¡æ‹Ÿæ£€ç´¢ç»“æœï¼ˆåŸºäºå®é™…ç½‘ç«™æ•°æ®ï¼‰
    setTimeout(() => {
        const mockResults = [
            {
                title: 'å’³å—½å˜å¼‚æ€§å“®å–˜çš„ä¸­åŒ»è¯å€™å­¦ç ”ç©¶',
                authors: ['ç½—ç¤¾æ–‡', 'æå‹æ—', 'æ™æ©ç¥¥'],
                journal: 'ç°ä»£ä¸­åŒ»ä¸´åºŠ',
                year: 2021,
                citation: 69,
                abstract: 'æœ¬ç ”ç©¶æ—¨åœ¨æ¢è®¨å’³å—½å˜å¼‚æ€§å“®å–˜æ‚£è€…çš„ä¸­åŒ»è¯å€™ç‰¹ç‚¹åŠæ¼”å˜è§„å¾‹ï¼Œé€šè¿‡æ–‡çŒ®å¤ä¹ å’Œä¸´åºŠå®è·µå¯¹265ä¾‹æ‚£è€…è¿›è¡Œäº†ç ”ç©¶ã€‚',
                doi: '',
                url: 'https://xblc.bucm.edu.cn/zh/article/18466683/',
                tags: ['ä¸­åŒ»', 'å“®å–˜', 'è¯å€™å­¦'],
                partition: 'ä¸­å›½ç§‘æŠ€æ ¸å¿ƒ'
            },
            {
                title: 'ä¸­è¥¿åŒ»ç»“åˆé˜²æ²»æ”¯æ°”ç®¡å“®å–˜çš„æ¢è®¨',
                authors: ['æ²ˆè‡ªå°¹'],
                journal: 'ä¸­å›½ä¸­è¥¿åŒ»ç»“åˆæ‚å¿—',
                year: 1995,
                citation: 63,
                abstract: 'æœ¬æ–‡æ¢è®¨äº†ä¸­è¥¿åŒ»ç»“åˆåœ¨æ”¯æ°”ç®¡å“®å–˜é˜²æ²»ä¸­çš„åº”ç”¨ï¼Œå¹¶åŒºåˆ†äº†å‘ä½œæœŸå’Œç¼“è§£æœŸçš„æ²»ç–—ç­–ç•¥ï¼ŒæŒ‡å‡ºä¸­åŒ»åœ¨ç¼“è§£æœŸæ²»ç–—çš„ä¼˜åŠ¿ã€‚',
                doi: '',
                url: 'http://www.cjim.cn/zxyjhcn/zxyjhcn/ch/reader/view_abstract.aspx?file_no=19950722',
                tags: ['ä¸­è¥¿åŒ»ç»“åˆ', 'æ”¯æ°”ç®¡å“®å–˜', 'é˜²æ²»'],
                partition: 'CSCD, åŒ—å¤§ä¸­æ–‡æ ¸å¿ƒ, ä¸­å›½ç§‘æŠ€æ ¸å¿ƒ'
            },
            {
                title: 'æˆ‘å›½æ”¯æ°”ç®¡å“®å–˜é˜²æ²»æŒ‡å—è§£è¯»',
                authors: ['æ—æ±Ÿæ¶›'],
                journal: 'book',
                year: 2011,
                citation: 49,
                abstract: 'æœ¬æ–‡è§£è¯»äº†æˆ‘å›½2008å¹´ä¿®è®¢çš„æ”¯æ°”ç®¡å“®å–˜é˜²æ²»æŒ‡å—ï¼Œå¼ºè°ƒäº†è‚ºåŠŸèƒ½æµ‹å®šåœ¨å“®å–˜è¯Šæ–­å’Œè¯„ä¼°ä¸­çš„é‡è¦æ€§ã€‚',
                doi: '',
                url: 'http://medi-guide.meditool.cn/guidepdf/E6C3E652-C8EB-C648-3265-683E3668CF11.pdf',
                tags: ['å“®å–˜', 'é˜²æ²»æŒ‡å—', 'è§£è¯»'],
                partition: ''
            },
            {
                title: 'ä¸­å›½å„¿ç«¥æ”¯æ°”ç®¡å“®å–˜é˜²æ²»æŒ‡å—ä¿®è®¢è¦ç‚¹çš„æ¢è®¨',
                authors: ['æ´ªå»ºå›½'],
                journal: 'ä¸´åºŠå„¿ç§‘æ‚å¿—',
                year: 2014,
                citation: 48,
                abstract: 'æœ¬æ–‡æ¢è®¨äº†2008å¹´åˆ¶å®šçš„ã€Šå„¿ç«¥æ”¯æ°”ç®¡å“®å–˜è¯Šæ–­ä¸é˜²æ²»æŒ‡å—ã€‹çš„ä¿®è®¢è¦ç‚¹ï¼Œå¹¶æŒ‡å‡ºäº†éšç€å¯¹å“®å–˜è®¤è¯†çš„æ·±å…¥ï¼Œå„¿ç«¥å“®å–˜çš„è¯Šæ²»æŠ€æœ¯ä¹Ÿåœ¨ä¸æ–­å‘å±•ã€‚',
                doi: '',
                url: 'https://jcp.xinhuamed.com.cn/CN/Y2014/V32/I2/101',
                tags: ['å„¿ç«¥å“®å–˜', 'é˜²æ²»æŒ‡å—', 'ä¿®è®¢'],
                partition: 'CSCD, åŒ—å¤§ä¸­æ–‡æ ¸å¿ƒ, ä¸­å›½ç§‘æŠ€æ ¸å¿ƒ'
            },
            {
                title: 'ç™½ä¸‰çƒ¯ä¸æ”¯æ°”ç®¡å“®å–˜',
                authors: ['é»„ä¸½è', 'æ–¹å‡¤'],
                journal: 'book',
                year: 2005,
                citation: 46,
                abstract: 'æœ¬æ–‡ä»‹ç»äº†å“®å–˜ä½œä¸ºä¸€ç§æ…¢æ€§ç‚ç—‡ç–¾ç—…ï¼Œä»¥åŠç™½ä¸‰çƒ¯åœ¨å…¶ä¸­ä½œä¸ºä¸€ç§é‡è¦çš„ç‚ç—‡ä»‹è´¨çš„ä½œç”¨ã€‚',
                doi: '',
                url: 'https://www.researchgate.net/profile/Liping-Huang-12/publication/343375145_Population_pharmacokinetic_study_of_caffeine_citrate_in_Chinese_premature_infants_with_apnea/links/607842128ea909241efea9bb/Population-pharmacokinetic-study-of-caffeine-citrate-in-Chinese-premature-infants-with-apnea.pdf',
                tags: ['ç™½ä¸‰çƒ¯', 'æ”¯æ°”ç®¡å“®å–˜', 'ç‚ç—‡ä»‹è´¨'],
                partition: ''
            },
            {
                title: 'å°å„¿å“®å–˜ä¸­åŒ»è¯Šç–—æŒ‡å—',
                authors: ['èµµéœ', 'æ±ªå—ä¼ ', 'éŸ©æ–°æ°‘', 'è™èˆœ', 'å€ªå…‰å¤', 'æç‡•å®', 'ç‹åŠ›å®'],
                journal: 'book',
                year: 2008,
                citation: 46,
                abstract: 'æœ¬æŒ‡å—ä»è®¤è¯†å°å„¿å“®å–˜çš„ç—…æœºã€æ²»ç–—ç°çŠ¶ã€å­˜åœ¨é—®é¢˜åŠæœªæ¥å‘å±•æ–¹å‘ç­‰æ–¹é¢ï¼Œæ¢è®¨äº†å°å„¿å“®å–˜çš„å±€éƒ¨æ²»ç–—ä¸æ•´ä½“è°ƒèŠ‚ã€‚',
                doi: '',
                url: 'https://dlweb.sogoucdn.com/mydocs/201912/80000048.pdf',
                tags: ['å°å„¿å“®å–˜', 'ä¸­åŒ»è¯Šç–—', 'æŒ‡å—'],
                partition: ''
            },
            {
                title: 'æ”¯æ°”ç®¡å“®å–˜çš„ç—…å› ç ”ç©¶è¿›å±•',
                authors: ['çª¦ç§€è‰', 'å”åå¹³', 'éŸ©ä¼Ÿ'],
                journal: 'å®ç”¨ä¸´åºŠåŒ»è¯æ‚å¿—',
                year: 2009,
                citation: 41,
                abstract: 'æœ¬æ–‡ç»¼è¿°äº†æ”¯æ°”ç®¡å“®å–˜çš„ç—…å› ç ”ç©¶è¿›å±•ï¼ŒæŒ‡å‡ºå“®å–˜æ‚£ç—…ç‡åœ¨å…¨çƒèŒƒå›´å†…å‘ˆä¸Šå‡è¶‹åŠ¿ï¼Œå·²æˆä¸ºå¸¸è§çš„æ…¢æ€§å‘¼å¸é“ç–¾ç—…ã€‚',
                doi: '',
                url: 'https://jcmp.yzu.edu.cn/article/doi/10.3969/j.issn.1672-2353.2009.05.006',
                tags: ['æ”¯æ°”ç®¡å“®å–˜', 'ç—…å› ', 'ç ”ç©¶è¿›å±•'],
                partition: 'ä¸­å›½ç§‘æŠ€æ ¸å¿ƒ'
            },
            {
                title: 'å¸å…¥æ²™ç¾ç‰¹ç½—æ›¿å¡æ¾å¹²ç²‰å‰‚ä¸è”åˆå¸å…¥ä¸¤ç§å¹²ç²‰å‰‚æ²»ç–—æˆäººå“®å–˜çš„ç–—æ•ˆå’Œå®‰å…¨æ€§çš„å¯¹ç…§ç ”ç©¶',
                authors: ['é’Ÿå—å±±', 'éƒ‘åŠ²å¹³', 'åˆ˜æ™“é’', 'è‚–æ­£ä¼¦', 'å§šå©‰è´', 'éŸ©ç¿”', 'ç‹è™¹'],
                journal: 'book',
                year: 2002,
                citation: 149,
                abstract: 'å›½å¤–å·²æœ‰å…³äºä¸Šè¿°ä¸¤ç§äº§å“è”åˆæ²»ç–—å“®å–˜æˆ–ä¸Šè¿°ä¸¤ç§äº§å“åˆ¶æˆå¤æ–¹åˆ¶å‰‚æ²»ç–—å“®å–˜çš„ä¸´åºŠç ”ç©¶ã€‚æœ¬ç ”ç©¶çš„ç›®çš„æ˜¯æ¯”è¾ƒSM/FPå¤æ–¹åˆ¶å‰‚ä¸SMå’ŒFPè”åˆåº”ç”¨æ²»ç–—æˆ‘å›½å“®å–˜æ‚£è€…çš„ç–—æ•ˆå’Œå®‰å…¨æ€§ã€‚',
                doi: '',
                url: '',
                tags: ['å“®å–˜', 'æ²™ç¾ç‰¹ç½—æ›¿å¡æ¾', 'ä¸´åºŠç ”ç©¶'],
                partition: ''
            },
            {
                title: 'å°å„¿å“®å–˜çš„å…ç–«å­¦å‘ç—…æœºåˆ¶åŠå…¶å¯¹ç­–',
                authors: ['æ¨é”¡å¼º'],
                journal: 'book',
                year: 2001,
                citation: 98,
                abstract: 'æœ¬æ–‡æ¢è®¨äº†å“®å–˜ä½œä¸ºä¸€ç§æ°”é“æ…¢æ€§ç‚ç—‡æ€§ç–¾ç—…ï¼Œå…¶å‘ç—…ä¸­å¼‚å¸¸å…ç–«ååº”çš„é‡è¦ä½œç”¨ï¼Œå¹¶å…³æ³¨äº†å“®å–˜å‘ç—…ç‡çš„ä¸Šå‡è¶‹åŠ¿ã€‚',
                doi: '',
                url: 'http://www.zgddek.com/CN/article/downloadArticleFile.do?attachType=PDF&id=11498',
                tags: ['å°å„¿å“®å–˜', 'å…ç–«å­¦', 'å‘ç—…æœºåˆ¶'],
                partition: ''
            },
            {
                title: 'æ™®ç±³å…‹æ°”é›¾å‰‚æ²»ç–—å„¿ç«¥å“®å–˜ç–—æ•ˆè§‚å¯Ÿ',
                authors: ['é™ˆå¼º', 'æœ±ç»¿ç»®', 'åˆ˜å»ºæ¢…', 'éƒ­å¾·å', 'ä½™å®šè‹±', 'é»„è–‡'],
                journal: 'ä¸­å›½å½“ä»£å„¿ç§‘æ‚å¿—',
                year: 2000,
                citation: 93,
                abstract: 'æœ¬ç ”ç©¶è§‚å¯Ÿäº†æ™®ç±³å…‹æ°”é›¾å‰‚åœ¨æ²»ç–—å„¿ç«¥å“®å–˜ä¸­çš„ç–—æ•ˆï¼Œç ”ç©¶å¯¹è±¡ä¸ºç¬¦åˆä¸­ååŒ»å­¦ä¼šå„¿ç«¥å“®å–˜è¯Šæ–­æ ‡å‡†çš„113ä¾‹å“®å–˜å„¿ç«¥ã€‚',
                doi: '',
                url: 'http://www.zgddek.com/EN/article/downloadArticleFile.do?attachType=PDF&id=11814',
                tags: ['å„¿ç«¥å“®å–˜', 'æ™®ç±³å…‹æ°”é›¾å‰‚', 'ç–—æ•ˆè§‚å¯Ÿ'],
                partition: ''
            }
        ];
        
        currentResults = mockResults;
        totalPages = 1;
        currentPage = 1;
        
        try {
            displayResults(mockResults);
            updateResultCount(mockResults.length);
            updatePagination();
        } catch (error) {
            console.error('æ˜¾ç¤ºæ£€ç´¢ç»“æœæ—¶å‡ºé”™:', error);
            resultsList.innerHTML = '<div style="text-align: center; padding: 40px; color: #f5222d;">æ£€ç´¢ç»“æœåŠ è½½å¤±è´¥ï¼Œè¯·é‡è¯•</div>';
        }
    }, 1000); // ç¼©çŸ­ç­‰å¾…æ—¶é—´åˆ°1ç§’
    } catch (error) {
        console.error('æ‰§è¡Œæ–‡çŒ®æ£€ç´¢æ—¶å‡ºé”™:', error);
        alert('æ£€ç´¢è¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯ï¼Œè¯·é‡è¯•');
    }
}

// é¡µé¢åŠ è½½æ—¶è‡ªåŠ¨æ˜¾ç¤ºç¤ºä¾‹æ•°æ®ï¼ˆä¸éœ€è¦è¾“å…¥å…³é”®è¯ï¼‰
function showDefaultResults() {
    const resultsList = document.getElementById('literatureResultsList');
    const emptyState = document.getElementById('emptyState');
    
    if (!resultsList || !emptyState) {
        return;
    }
    
    // ç›´æ¥æ˜¾ç¤ºæ¨¡æ‹Ÿæ•°æ®ï¼Œä¸éœ€è¦è¾“å…¥å…³é”®è¯
    const mockResults = [
        {
            title: 'å’³å—½å˜å¼‚æ€§å“®å–˜çš„ä¸­åŒ»è¯å€™å­¦ç ”ç©¶',
            authors: ['ç½—ç¤¾æ–‡', 'æå‹æ—', 'æ™æ©ç¥¥'],
            journal: 'ç°ä»£ä¸­åŒ»ä¸´åºŠ',
            year: 2021,
            citation: 69,
            abstract: 'æœ¬ç ”ç©¶æ—¨åœ¨æ¢è®¨å’³å—½å˜å¼‚æ€§å“®å–˜æ‚£è€…çš„ä¸­åŒ»è¯å€™ç‰¹ç‚¹åŠæ¼”å˜è§„å¾‹ï¼Œé€šè¿‡æ–‡çŒ®å¤ä¹ å’Œä¸´åºŠå®è·µå¯¹265ä¾‹æ‚£è€…è¿›è¡Œäº†ç ”ç©¶ã€‚',
            doi: '',
            url: 'https://xblc.bucm.edu.cn/zh/article/18466683/',
            tags: ['ä¸­åŒ»', 'å“®å–˜', 'è¯å€™å­¦'],
            partition: 'ä¸­å›½ç§‘æŠ€æ ¸å¿ƒ'
        },
        {
            title: 'ä¸­è¥¿åŒ»ç»“åˆé˜²æ²»æ”¯æ°”ç®¡å“®å–˜çš„æ¢è®¨',
            authors: ['æ²ˆè‡ªå°¹'],
            journal: 'ä¸­å›½ä¸­è¥¿åŒ»ç»“åˆæ‚å¿—',
            year: 1995,
            citation: 63,
            abstract: 'æœ¬æ–‡æ¢è®¨äº†ä¸­è¥¿åŒ»ç»“åˆåœ¨æ”¯æ°”ç®¡å“®å–˜é˜²æ²»ä¸­çš„åº”ç”¨ï¼Œå¹¶åŒºåˆ†äº†å‘ä½œæœŸå’Œç¼“è§£æœŸçš„æ²»ç–—ç­–ç•¥ï¼ŒæŒ‡å‡ºä¸­åŒ»åœ¨ç¼“è§£æœŸæ²»ç–—çš„ä¼˜åŠ¿ã€‚',
            doi: '',
            url: 'http://www.cjim.cn/zxyjhcn/zxyjhcn/ch/reader/view_abstract.aspx?file_no=19950722',
            tags: ['ä¸­è¥¿åŒ»ç»“åˆ', 'æ”¯æ°”ç®¡å“®å–˜', 'é˜²æ²»'],
            partition: 'CSCD, åŒ—å¤§ä¸­æ–‡æ ¸å¿ƒ, ä¸­å›½ç§‘æŠ€æ ¸å¿ƒ'
        },
        {
            title: 'æˆ‘å›½æ”¯æ°”ç®¡å“®å–˜é˜²æ²»æŒ‡å—è§£è¯»',
            authors: ['æ—æ±Ÿæ¶›'],
            journal: 'book',
            year: 2011,
            citation: 49,
            abstract: 'æœ¬æ–‡è§£è¯»äº†æˆ‘å›½2008å¹´ä¿®è®¢çš„æ”¯æ°”ç®¡å“®å–˜é˜²æ²»æŒ‡å—ï¼Œå¼ºè°ƒäº†è‚ºåŠŸèƒ½æµ‹å®šåœ¨å“®å–˜è¯Šæ–­å’Œè¯„ä¼°ä¸­çš„é‡è¦æ€§ã€‚',
            doi: '',
            url: 'http://medi-guide.meditool.cn/guidepdf/E6C3E652-C8EB-C648-3265-683E3668CF11.pdf',
            tags: ['å“®å–˜', 'é˜²æ²»æŒ‡å—', 'è§£è¯»'],
            partition: ''
        },
        {
            title: 'ä¸­å›½å„¿ç«¥æ”¯æ°”ç®¡å“®å–˜é˜²æ²»æŒ‡å—ä¿®è®¢è¦ç‚¹çš„æ¢è®¨',
            authors: ['æ´ªå»ºå›½'],
            journal: 'ä¸´åºŠå„¿ç§‘æ‚å¿—',
            year: 2014,
            citation: 48,
            abstract: 'æœ¬æ–‡æ¢è®¨äº†2008å¹´åˆ¶å®šçš„ã€Šå„¿ç«¥æ”¯æ°”ç®¡å“®å–˜è¯Šæ–­ä¸é˜²æ²»æŒ‡å—ã€‹çš„ä¿®è®¢è¦ç‚¹ï¼Œå¹¶æŒ‡å‡ºäº†éšç€å¯¹å“®å–˜è®¤è¯†çš„æ·±å…¥ï¼Œå„¿ç«¥å“®å–˜çš„è¯Šæ²»æŠ€æœ¯ä¹Ÿåœ¨ä¸æ–­å‘å±•ã€‚',
            doi: '',
            url: 'https://jcp.xinhuamed.com.cn/CN/Y2014/V32/I2/101',
            tags: ['å„¿ç«¥å“®å–˜', 'é˜²æ²»æŒ‡å—', 'ä¿®è®¢'],
            partition: 'CSCD, åŒ—å¤§ä¸­æ–‡æ ¸å¿ƒ, ä¸­å›½ç§‘æŠ€æ ¸å¿ƒ'
        },
        {
            title: 'ç™½ä¸‰çƒ¯ä¸æ”¯æ°”ç®¡å“®å–˜',
            authors: ['é»„ä¸½è', 'æ–¹å‡¤'],
            journal: 'book',
            year: 2005,
            citation: 46,
            abstract: 'æœ¬æ–‡ä»‹ç»äº†å“®å–˜ä½œä¸ºä¸€ç§æ…¢æ€§ç‚ç—‡ç–¾ç—…ï¼Œä»¥åŠç™½ä¸‰çƒ¯åœ¨å…¶ä¸­ä½œä¸ºä¸€ç§é‡è¦çš„ç‚ç—‡ä»‹è´¨çš„ä½œç”¨ã€‚',
            doi: '',
            url: 'https://www.researchgate.net/profile/Liping-Huang-12/publication/343375145_Population_pharmacokinetic_study_of_caffeine_citrate_in_Chinese_premature_infants_with_apnea/links/607842128ea909241efea9bb/Population-pharmacokinetic-study-of-caffeine-citrate-in-Chinese-premature-infants-with-apnea.pdf',
            tags: ['ç™½ä¸‰çƒ¯', 'æ”¯æ°”ç®¡å“®å–˜', 'ç‚ç—‡ä»‹è´¨'],
            partition: ''
        },
        {
            title: 'å°å„¿å“®å–˜ä¸­åŒ»è¯Šç–—æŒ‡å—',
            authors: ['èµµéœ', 'æ±ªå—ä¼ ', 'éŸ©æ–°æ°‘', 'è™èˆœ', 'å€ªå…‰å¤', 'æç‡•å®', 'ç‹åŠ›å®'],
            journal: 'book',
            year: 2008,
            citation: 46,
            abstract: 'æœ¬æŒ‡å—ä»è®¤è¯†å°å„¿å“®å–˜çš„ç—…æœºã€æ²»ç–—ç°çŠ¶ã€å­˜åœ¨é—®é¢˜åŠæœªæ¥å‘å±•æ–¹å‘ç­‰æ–¹é¢ï¼Œæ¢è®¨äº†å°å„¿å“®å–˜çš„å±€éƒ¨æ²»ç–—ä¸æ•´ä½“è°ƒèŠ‚ã€‚',
            doi: '',
            url: 'https://dlweb.sogoucdn.com/mydocs/201912/80000048.pdf',
            tags: ['å°å„¿å“®å–˜', 'ä¸­åŒ»è¯Šç–—', 'æŒ‡å—'],
            partition: ''
        },
        {
            title: 'æ”¯æ°”ç®¡å“®å–˜çš„ç—…å› ç ”ç©¶è¿›å±•',
            authors: ['çª¦ç§€è‰', 'å”åå¹³', 'éŸ©ä¼Ÿ'],
            journal: 'å®ç”¨ä¸´åºŠåŒ»è¯æ‚å¿—',
            year: 2009,
            citation: 41,
            abstract: 'æœ¬æ–‡ç»¼è¿°äº†æ”¯æ°”ç®¡å“®å–˜çš„ç—…å› ç ”ç©¶è¿›å±•ï¼ŒæŒ‡å‡ºå“®å–˜æ‚£ç—…ç‡åœ¨å…¨çƒèŒƒå›´å†…å‘ˆä¸Šå‡è¶‹åŠ¿ï¼Œå·²æˆä¸ºå¸¸è§çš„æ…¢æ€§å‘¼å¸é“ç–¾ç—…ã€‚',
            doi: '',
            url: 'https://jcmp.yzu.edu.cn/article/doi/10.3969/j.issn.1672-2353.2009.05.006',
            tags: ['æ”¯æ°”ç®¡å“®å–˜', 'ç—…å› ', 'ç ”ç©¶è¿›å±•'],
            partition: 'ä¸­å›½ç§‘æŠ€æ ¸å¿ƒ'
        },
        {
            title: 'å¸å…¥æ²™ç¾ç‰¹ç½—æ›¿å¡æ¾å¹²ç²‰å‰‚ä¸è”åˆå¸å…¥ä¸¤ç§å¹²ç²‰å‰‚æ²»ç–—æˆäººå“®å–˜çš„ç–—æ•ˆå’Œå®‰å…¨æ€§çš„å¯¹ç…§ç ”ç©¶',
            authors: ['é’Ÿå—å±±', 'éƒ‘åŠ²å¹³', 'åˆ˜æ™“é’', 'è‚–æ­£ä¼¦', 'å§šå©‰è´', 'éŸ©ç¿”', 'ç‹è™¹'],
            journal: 'book',
            year: 2002,
            citation: 149,
            abstract: 'å›½å¤–å·²æœ‰å…³äºä¸Šè¿°ä¸¤ç§äº§å“è”åˆæ²»ç–—å“®å–˜æˆ–ä¸Šè¿°ä¸¤ç§äº§å“åˆ¶æˆå¤æ–¹åˆ¶å‰‚æ²»ç–—å“®å–˜çš„ä¸´åºŠç ”ç©¶ã€‚æœ¬ç ”ç©¶çš„ç›®çš„æ˜¯æ¯”è¾ƒSM/FPå¤æ–¹åˆ¶å‰‚ä¸SMå’ŒFPè”åˆåº”ç”¨æ²»ç–—æˆ‘å›½å“®å–˜æ‚£è€…çš„ç–—æ•ˆå’Œå®‰å…¨æ€§ã€‚',
            doi: '',
            url: '',
            tags: ['å“®å–˜', 'æ²™ç¾ç‰¹ç½—æ›¿å¡æ¾', 'ä¸´åºŠç ”ç©¶'],
            partition: ''
        },
        {
            title: 'å°å„¿å“®å–˜çš„å…ç–«å­¦å‘ç—…æœºåˆ¶åŠå…¶å¯¹ç­–',
            authors: ['æ¨é”¡å¼º'],
            journal: 'book',
            year: 2001,
            citation: 98,
            abstract: 'æœ¬æ–‡æ¢è®¨äº†å“®å–˜ä½œä¸ºä¸€ç§æ°”é“æ…¢æ€§ç‚ç—‡æ€§ç–¾ç—…ï¼Œå…¶å‘ç—…ä¸­å¼‚å¸¸å…ç–«ååº”çš„é‡è¦ä½œç”¨ï¼Œå¹¶å…³æ³¨äº†å“®å–˜å‘ç—…ç‡çš„ä¸Šå‡è¶‹åŠ¿ã€‚',
            doi: '',
            url: 'http://www.zgddek.com/CN/article/downloadArticleFile.do?attachType=PDF&id=11498',
            tags: ['å°å„¿å“®å–˜', 'å…ç–«å­¦', 'å‘ç—…æœºåˆ¶'],
            partition: ''
        },
        {
            title: 'æ™®ç±³å…‹æ°”é›¾å‰‚æ²»ç–—å„¿ç«¥å“®å–˜ç–—æ•ˆè§‚å¯Ÿ',
            authors: ['é™ˆå¼º', 'æœ±ç»¿ç»®', 'åˆ˜å»ºæ¢…', 'éƒ­å¾·å', 'ä½™å®šè‹±', 'é»„è–‡'],
            journal: 'ä¸­å›½å½“ä»£å„¿ç§‘æ‚å¿—',
            year: 2000,
            citation: 93,
            abstract: 'æœ¬ç ”ç©¶è§‚å¯Ÿäº†æ™®ç±³å…‹æ°”é›¾å‰‚åœ¨æ²»ç–—å„¿ç«¥å“®å–˜ä¸­çš„ç–—æ•ˆï¼Œç ”ç©¶å¯¹è±¡ä¸ºç¬¦åˆä¸­ååŒ»å­¦ä¼šå„¿ç«¥å“®å–˜è¯Šæ–­æ ‡å‡†çš„113ä¾‹å“®å–˜å„¿ç«¥ã€‚',
            doi: '',
            url: 'http://www.zgddek.com/EN/article/downloadArticleFile.do?attachType=PDF&id=11814',
            tags: ['å„¿ç«¥å“®å–˜', 'æ™®ç±³å…‹æ°”é›¾å‰‚', 'ç–—æ•ˆè§‚å¯Ÿ'],
            partition: ''
        }
    ];
    
    currentResults = mockResults;
    totalPages = 1;
    currentPage = 1;
    
    emptyState.style.display = 'none';
    resultsList.style.display = 'block';
    displayResults(mockResults);
    updateResultCount(mockResults.length);
    updatePagination();
}

// æ˜¾ç¤ºæ£€ç´¢ç»“æœ
function displayResults(results) {
    try {
        const resultsList = document.getElementById('literatureResultsList');
        
        if (!resultsList) {
            console.error('literatureResultsList å…ƒç´ æœªæ‰¾åˆ°');
            return;
        }
        
        if (!results || results.length === 0) {
            resultsList.innerHTML = '<div style="text-align: center; padding: 40px; color: #999;">æœªæ‰¾åˆ°ç›¸å…³æ–‡çŒ®</div>';
            return;
        }
        
        resultsList.innerHTML = results.map((result, index) => `
        <div class="literature-result-item" onclick="viewLiteratureDetail(${index})">
            <div class="result-item-header">
                <h3 class="result-item-title">${result.title}</h3>
                <div class="result-item-actions">
                    <button class="result-item-action-btn" onclick="event.stopPropagation(); downloadLiterature(${index})">ğŸ“¥ ä¸‹è½½</button>
                    <button class="result-item-action-btn" onclick="event.stopPropagation(); saveLiterature(${index})">â­ æ”¶è—</button>
                </div>
            </div>
            <div class="result-item-meta">
                <span class="result-item-meta-item">
                    <strong>ä½œè€…ï¼š</strong>${result.authors.join(', ')}
                </span>
                <span class="result-item-meta-item">
                    <strong>æœŸåˆŠï¼š</strong>${result.journal}
                </span>
                <span class="result-item-meta-item">
                    <strong>å‘è¡¨å¹´ä»½ï¼š</strong>${result.year}
                </span>
                <span class="result-item-meta-item">
                    <strong>å¼•ç”¨é‡ï¼š</strong>${result.citation}
                </span>
                ${result.partition ? `<span class="result-item-meta-item"><strong>åˆ†åŒºï¼š</strong>${result.partition}</span>` : ''}
                ${result.doi ? `<span class="result-item-meta-item"><strong>DOIï¼š</strong>${result.doi}</span>` : ''}
            </div>
            <div class="result-item-abstract">
                ${result.abstract}
            </div>
            <div class="result-item-tags">
                ${result.tags.map(tag => `<span class="result-item-tag">${tag}</span>`).join('')}
            </div>
        </div>
    `).join('');
    } catch (error) {
        console.error('æ¸²æŸ“æ£€ç´¢ç»“æœæ—¶å‡ºé”™:', error);
        const resultsList = document.getElementById('literatureResultsList');
        if (resultsList) {
            resultsList.innerHTML = '<div style="text-align: center; padding: 40px; color: #f5222d;">ç»“æœæ¸²æŸ“å¤±è´¥ï¼Œè¯·é‡è¯•</div>';
        }
    }
}

// æ›´æ–°ç»“æœæ•°é‡
function updateResultCount(count) {
    try {
        const resultCountEl = document.getElementById('resultCount');
        if (resultCountEl) {
            resultCountEl.textContent = `å…±æ‰¾åˆ° ${count} æ¡ç»“æœ`;
        }
    } catch (error) {
        console.error('æ›´æ–°ç»“æœæ•°é‡æ—¶å‡ºé”™:', error);
    }
}

// æ›´æ–°åˆ†é¡µ
function updatePagination() {
    const pagination = document.getElementById('literaturePagination');
    const pageInfo = document.getElementById('pageInfo');
    const prevBtn = document.getElementById('prevPage');
    const nextBtn = document.getElementById('nextPage');
    
    if (totalPages > 1) {
        pagination.style.display = 'flex';
        pageInfo.textContent = `ç¬¬ ${currentPage} é¡µï¼Œå…± ${totalPages} é¡µ`;
        prevBtn.disabled = currentPage === 1;
        nextBtn.disabled = currentPage === totalPages;
    } else {
        pagination.style.display = 'none';
    }
}

// åˆ‡æ¢é¡µé¢
function changePage(delta) {
    const newPage = currentPage + delta;
    if (newPage >= 1 && newPage <= totalPages) {
        currentPage = newPage;
        // é‡æ–°æ‰§è¡Œæ£€ç´¢ï¼ˆå®é™…åº”è¯¥è°ƒç”¨APIè·å–å¯¹åº”é¡µçš„æ•°æ®ï¼‰
        performLiteratureSearch();
    }
}

// åˆ‡æ¢é«˜çº§æ£€ç´¢é¢æ¿
function toggleAdvancedSearch() {
    const panel = document.getElementById('advancedSearchPanel');
    panel.style.display = panel.style.display === 'none' ? 'block' : 'none';
}

// é‡ç½®é«˜çº§æ£€ç´¢
function resetAdvancedSearch() {
    document.getElementById('titleKeyword').value = '';
    document.getElementById('authorKeyword').value = '';
    document.getElementById('journalKeyword').value = '';
    document.getElementById('yearFrom').value = '';
    document.getElementById('yearTo').value = '';
    document.getElementById('literatureType').value = '';
    document.getElementById('language').value = '';
}

// åº”ç”¨é«˜çº§æ£€ç´¢
function applyAdvancedSearch() {
    // æ”¶é›†é«˜çº§æ£€ç´¢æ¡ä»¶
    const advancedConditions = {
        title: document.getElementById('titleKeyword').value,
        author: document.getElementById('authorKeyword').value,
        journal: document.getElementById('journalKeyword').value,
        yearFrom: document.getElementById('yearFrom').value,
        yearTo: document.getElementById('yearTo').value,
        type: document.getElementById('literatureType').value,
        language: document.getElementById('language').value
    };
    
    // æ‰§è¡Œæ£€ç´¢ï¼ˆå®é™…åº”è¯¥å°†é«˜çº§æ£€ç´¢æ¡ä»¶ä¼ é€’ç»™APIï¼‰
    performLiteratureSearch();
    
    // å…³é—­é«˜çº§æ£€ç´¢é¢æ¿
    document.getElementById('advancedSearchPanel').style.display = 'none';
}

// æŸ¥çœ‹æ–‡çŒ®è¯¦æƒ…
function viewLiteratureDetail(index) {
    const result = currentResults[index];
    alert(`æŸ¥çœ‹æ–‡çŒ®è¯¦æƒ…ï¼š\n\næ ‡é¢˜ï¼š${result.title}\nä½œè€…ï¼š${result.authors.join(', ')}\næœŸåˆŠï¼š${result.journal}\nå¹´ä»½ï¼š${result.year}\nDOIï¼š${result.doi}\n\nï¼ˆå®é™…åº”ç”¨ä¸­åº”æ‰“å¼€è¯¦æƒ…é¡µé¢ï¼‰`);
}

// ä¸‹è½½æ–‡çŒ®
function downloadLiterature(index) {
    const result = currentResults[index];
    alert(`æ­£åœ¨ä¸‹è½½æ–‡çŒ®ï¼š${result.title}\n\nï¼ˆå®é™…åº”ç”¨ä¸­åº”è°ƒç”¨ä¸‹è½½APIï¼‰`);
}

// æ”¶è—æ–‡çŒ®
function saveLiterature(index) {
    const result = currentResults[index];
    alert(`å·²æ”¶è—æ–‡çŒ®ï¼š${result.title}\n\nï¼ˆå®é™…åº”ç”¨ä¸­åº”è°ƒç”¨æ”¶è—APIï¼‰`);
}

// æ‰“å¼€æ™ºèƒ½ç­›é€‰
function openSmartFilter() {
    document.getElementById('smartFilterModal').style.display = 'flex';
    // åˆå§‹åŒ–èŒƒå›´æ»‘å—
    initRangeSliders();
}

// å…³é—­æ™ºèƒ½ç­›é€‰
function closeSmartFilter() {
    document.getElementById('smartFilterModal').style.display = 'none';
}

// åˆå§‹åŒ–èŒƒå›´æ»‘å—
function initRangeSliders() {
    // å¹´ä»½èŒƒå›´æ»‘å—
    const yearMin = document.getElementById('yearRangeMin');
    const yearMax = document.getElementById('yearRangeMax');
    const yearMinLabel = document.getElementById('yearMinLabel');
    const yearMaxLabel = document.getElementById('yearMaxLabel');
    
    yearMin.addEventListener('input', function() {
        if (parseInt(this.value) > parseInt(yearMax.value)) {
            yearMax.value = this.value;
        }
        yearMinLabel.textContent = this.value;
        updateYearRange();
    });
    
    yearMax.addEventListener('input', function() {
        if (parseInt(this.value) < parseInt(yearMin.value)) {
            yearMin.value = this.value;
        }
        yearMaxLabel.textContent = this.value;
        updateYearRange();
    });
    
    // æœŸåˆŠç­‰çº§æ»‘å—
    const journalMin = document.getElementById('journalLevelMin');
    const journalMax = document.getElementById('journalLevelMax');
    const journalMinLabel = document.getElementById('journalLevelMinLabel');
    const journalMaxLabel = document.getElementById('journalLevelMaxLabel');
    const journalLabels = ['Q1', 'Q2', 'Q3', 'Q4', 'All'];
    
    journalMin.addEventListener('input', function() {
        if (parseInt(this.value) > parseInt(journalMax.value)) {
            journalMax.value = this.value;
        }
        journalMinLabel.textContent = journalLabels[parseInt(this.value)];
        updateJournalLevelRange();
    });
    
    journalMax.addEventListener('input', function() {
        if (parseInt(this.value) < parseInt(journalMin.value)) {
            journalMin.value = this.value;
        }
        journalMaxLabel.textContent = journalLabels[parseInt(this.value)];
        updateJournalLevelRange();
    });
    
    // æ ‡ç­¾è¾“å…¥
    const tagInput = document.getElementById('journalTagInput');
    const tagList = document.getElementById('journalTagList');
    
    tagInput.addEventListener('keypress', function(e) {
        if (e.key === 'Enter' && this.value.trim()) {
            addTag(this.value.trim());
            this.value = '';
        }
    });
}

// æ›´æ–°å¹´ä»½èŒƒå›´æ˜¾ç¤º
function updateYearRange() {
    const yearMin = document.getElementById('yearRangeMin').value;
    const yearMax = document.getElementById('yearRangeMax').value;
    // å¯ä»¥åœ¨è¿™é‡Œæ›´æ–°æ»‘å—ä¹‹é—´çš„å¡«å……é¢œè‰²
}

// æ›´æ–°æœŸåˆŠç­‰çº§èŒƒå›´æ˜¾ç¤º
function updateJournalLevelRange() {
    const journalMin = document.getElementById('journalLevelMin').value;
    const journalMax = document.getElementById('journalLevelMax').value;
    // å¯ä»¥åœ¨è¿™é‡Œæ›´æ–°æ»‘å—ä¹‹é—´çš„å¡«å……é¢œè‰²
}

// æ·»åŠ æ ‡ç­¾
function addTag(tagText) {
    const tagList = document.getElementById('journalTagList');
    const tagItem = document.createElement('div');
    tagItem.className = 'tag-item';
    tagItem.innerHTML = `
        <span>${tagText}</span>
        <button class="tag-remove" onclick="removeTag(this)">Ã—</button>
    `;
    tagList.appendChild(tagItem);
}

// ç§»é™¤æ ‡ç­¾
function removeTag(button) {
    button.parentElement.remove();
}

// é‡ç½®æ™ºèƒ½ç­›é€‰
function resetSmartFilter() {
    // é‡ç½®è¯­è¨€ç±»å‹
    document.querySelector('input[name="languageType"][value="all"]').checked = true;
    
    // é‡ç½®å¹´ä»½èŒƒå›´
    document.getElementById('yearRangeMin').value = 1920;
    document.getElementById('yearRangeMax').value = 2025;
    document.getElementById('yearMinLabel').textContent = '1920';
    document.getElementById('yearMaxLabel').textContent = '2025';
    
    // é‡ç½®æœŸåˆŠç­‰çº§
    document.getElementById('journalLevelMin').value = 0;
    document.getElementById('journalLevelMax').value = 4;
    document.getElementById('journalLevelMinLabel').textContent = 'Q1';
    document.getElementById('journalLevelMaxLabel').textContent = 'All';
    
    // æ¸…ç©ºæ ‡ç­¾
    document.getElementById('journalTagList').innerHTML = '';
    
    // é‡ç½®PDFå¼€å…³
    document.getElementById('hasPDF').checked = false;
}

// åº”ç”¨æ™ºèƒ½ç­›é€‰
function applySmartFilter() {
    // æ”¶é›†ç­›é€‰æ¡ä»¶
    const filterConditions = {
        languageType: document.querySelector('input[name="languageType"]:checked').value,
        yearMin: document.getElementById('yearRangeMin').value,
        yearMax: document.getElementById('yearRangeMax').value,
        journalLevelMin: document.getElementById('journalLevelMin').value,
        journalLevelMax: document.getElementById('journalLevelMax').value,
        tags: Array.from(document.querySelectorAll('.tag-item span')).map(span => span.textContent),
        hasPDF: document.getElementById('hasPDF').checked
    };
    
    console.log('åº”ç”¨ç­›é€‰æ¡ä»¶ï¼š', filterConditions);
    
    // å…³é—­æ¨¡æ€æ¡†
    closeSmartFilter();
    
    // é‡æ–°æ‰§è¡Œæ£€ç´¢ï¼ˆå®é™…åº”è¯¥å°†ç­›é€‰æ¡ä»¶ä¼ é€’ç»™APIï¼‰
    performLiteratureSearch();
}

// åˆå§‹åŒ–é¡µé¢
function initPage_research_literature_search() {
    // é¡µé¢åŠ è½½æ—¶çš„åˆå§‹åŒ–é€»è¾‘
    console.log('æ–‡çŒ®æ£€ç´¢é¡µé¢å·²åŠ è½½');
    
    // é˜»æ­¢æ¨¡æ€æ¡†å†…å®¹åŒºåŸŸçš„ç‚¹å‡»äº‹ä»¶å†’æ³¡
    const filterContent = document.querySelector('.smart-filter-content');
    if (filterContent) {
        filterContent.addEventListener('click', function(e) {
            e.stopPropagation();
        });
    }
    
    // é¡µé¢åŠ è½½æ—¶è‡ªåŠ¨æ˜¾ç¤ºç¤ºä¾‹æ•°æ®
    setTimeout(() => {
        showDefaultResults();
    }, 500);
}
</script>
